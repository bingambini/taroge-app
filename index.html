<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Svaqi Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- შენი ორიგინალური CSS რჩება უცვლელი -->
    <style>/* შენი CSS */ </style> <!-- ჩამოტვირთე შენი CSS აქვე -->
</head>
<body>
    <!-- შენი HTML სტრუქტურა რჩება -->

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); tg.ready();

        // Theme ადაპტაცია
        document.documentElement.style.setProperty('--tg-color-scheme', tg.colorScheme);
        document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
        tg.onEvent('themeChanged', () => location.reload()); // განახლება თემის შეცვლაზე

        // MainButton შეკვეთისთვის
        tg.MainButton.setText('შეკვეთა').show().onClick(openCheckout);

        // BackButton დეტალებში
        tg.BackButton.onClick(() => tg.BackButton.hide());

        let allProducts = [], cart = [], currentP = null, selSize = '', selColor = '', currentSlide = 0;
        
        // შენი SHEET_ID და SCRIPT_URL
        const SHEET_ID = 'შენი_SHEET_ID'; // შეცვალე შენი ID-ით
        const SCRIPT_URL = 'შენი_SCRIPT_URL';

        async function init() {
            try {
                tg.HapticFeedback.notification('success');
                // შენი CSV fetch და parse ლოგიკა loading-ით
                const loader = document.createElement('div'); loader.innerText = 'ჩატვირთვა...'; document.body.appendChild(loader);
                // ... შენი კოდი ...
                loader.remove();
                renderProducts(allProducts);
            } catch(e) {
                tg.showAlert('შეცდომა მონაცემების ჩატვირთვაში: ' + e.message);
            }
        }

        // შეკვეთის გაგზავნა ბოტში tg.sendData-ით
        async function sendOrder() {
            const data = { /* შენი მონაცემები */ };
            if (!data.customer) return tg.showAlert('შეავსე ველები!');
            tg.MainButton.showProgress();
            try {
                tg.sendData(JSON.stringify(data)); // ბოტი იღებს web_app_data
                tg.showAlert('შეკვეთა გაიგზავნა ბოტში!');
                cart = []; tg.MainButton.hide();
            } catch(e) {
                tg.showAlert('შეცდომა!');
            } finally {
                tg.MainButton.hideProgress();
            }
        }

        // შენი რჩება ფუნქციები...
        init();
    </script>
</body>
</html>
